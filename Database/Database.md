# 概念データモデル


# 関係スキーマ
## 関数従属性
### 多値従属性
グループ、メンバーのような従属性。国、都道府県といった属性に対して、重複無くタプルが登録されていれば、それは多値従属している。

ダメな例は、「日本」「東京都」、「日本」「埼玉」、「日本」「埼玉」、というように「埼玉」が二回出現するような場合。

### 結合従属性

## 正規化
### 非正規形
いずれかの属性の値が単一値でないもの。

例：あるレコードの趣味属性に、「テニス」「野球」といった複数の情報が登録されている。

### 第１正規形
すべての属性の値が単一値であることが条件。

### 第２正規形
非キー属性が候補キーに部分関数従属していないことが条件。

### 第３正規形
候補キーから推移的関数従属していないことが条件。

### ボイスコッド正規形
非キーが候補キーに関数従属していないことが条件。

### 第４正規形


### 第５正規形


# SQL

## 制約

### 外部キーの設定

#### 列制約の書き方
```
CREATE TABLE 社員(社員番号 CHAR(8) PRIMARY KEY,
                 名前 CHAR(30) NOT NULL,
                 担当番号 CHAR(5) REFERENCES 担当(担当番号))
```

#### テーブル制約の書き方
```
CREATE TABLE 社員(社員番号 CHAR(5) RPIMARY KEY,
                 名前 CHAR(30) NOT NULL,
                 担当番号 CHAR(5),
                 FOREIGN KEY(担当番号)
                 REFERENCES 担当(担当番号))
```

### 削除・更新オプションの指定
参照先属性を削除もしくは更新した時の動作として以下のオプションがある。

まず削除か更新かは以下の通りに指定する。

- ON DELETE
- ON UPDATE

次にどのような動作を実施するかは以下の通りに指定する。

- NO ACTION ・・・ 何もしない。参照先は削除・更新出来ない。
- CASCADE ・・・ 参照先が削除されたら同時に削除する。
- SET NULL ・・・ 参照先が削除されたらNULLを設定する。

SQLは以下の通りに記述する。

```
CREATE TABLE 社員(社員番号 CHAR(5) RPIMARY KEY,
                 名前 CHAR(30) NOT NULL,
                 担当番号 CHAR(5),
                 FOREIGN KEY(担当番号)
                 REFERENCES 担当(担当番号)
                 ON DELETE SET NULL)
```

### 表明(ASSERTION)

### 定義域(DOMAIN)

### 制約名の付与(CONSTRAINT)
